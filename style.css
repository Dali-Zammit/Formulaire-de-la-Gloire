/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 Â  NIRD OS v6.0 - ThÃ¨me Fusion (IBM Plex + Effets CRT/Glitch)
 Â  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* Import de la police IBM Plex Mono pour un look propre et lisible */
@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&display=swap');

/* â•â•â• VARIABLES COULEUR â•â•â• */
:root {
    --bg-deep: #000000;      /* Noir Absolu */
    --main-text: #00A000;    /* VERT Ã‰TEINT (P39 Moniteur) */
    --primary-color: #00A000; 
    --secondary-color: #007000; /* Vert DiminuÃ©/Infos */
    --error-color: #FF0000;   
    --success-color: #00A000; 
    --shadow-light: rgba(0, 160, 0, 0.9); /* Glow Vert Sombre Fort */
    /* Nouveau glow pour le texte */
    --glow-text: 0 0 1px var(--primary-color), 0 0 5px var(--secondary-color);
    /* Glow gÃ©nÃ©ral du terminal */
    --glow-terminal: 0 0 20px var(--secondary-color), 0 0 60px rgba(0, 160, 0, 0.2);
}

/* â•â•â• BASE & EFFET DE FOND â•â•â• */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    background: var(--bg-deep);
    color: var(--main-text);
    font-family: 'IBM Plex Mono', monospace;
    overflow: hidden;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    font-size: 14px; 
    /* Effet CRT (Important) */
    filter: contrast(12) brightness(1.2) drop-shadow(0 0 5px var(--primary-color));
    perspective: 1000px;
}

/* --- EFFETS CRT & ANIMATIONS (Simulation d'Ã©cran cathodique) --- */
.matrix-bg {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-image: 
        linear-gradient(0deg, transparent 20%, rgba(0, 160, 0, 0.06) 21%, rgba(0, 160, 0, 0.06) 22%, transparent 23%), 
        linear-gradient(90deg, transparent 20%, rgba(0, 160, 0, 0.06) 21%, rgba(0, 160, 0, 0.06) 22%, transparent 23%);
    background-size: 80px 80px; 
    animation: moveBackground 30s linear infinite; 
    z-index: 1; opacity: 0.3; 
}
@keyframes moveBackground {
    from { background-position: 0 0; }
    to { background-position: 0 100%; }
}

.crt-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    box-shadow: inset 0 0 250px rgba(0,0,0,0.9); 
    background: radial-gradient(circle, rgba(0,0,0,0) 65%, rgba(0,0,0,0.9) 100%);
    pointer-events: none; z-index: 10;
}

.scanline {
    width: 100%; height: 2px; 
    z-index: 11; 
    background: linear-gradient(to bottom, rgba(0, 160, 0, 0.3) 50%, rgba(0, 0, 0, 0.6) 100%); 
    opacity: 0.35; 
    position: absolute; top: 0;
    animation: scanline 4s linear infinite; 
    pointer-events: none;
}
@keyframes scanline { 0% { top: -2%; } 100% { top: 102%; } }

.screen-flicker {
    position: fixed; top:0; left:0; width:100%; height:100%;
    background: rgba(0, 160, 0, 0.01); 
    z-index: 12; pointer-events: none; 
    animation: flicker 0.1s infinite; 
}
@keyframes flicker { 
    0% { opacity: 0.99; } 50% { opacity: 1; } 100% { opacity: 0.995; } 
}
/* Fin des effets CRT */


/* â•â•â• TERMINAL WINDOW â•â•â• */
.container {
    width: 95%; max-width: 1100px; height: 90vh;
    /* Utilisation de la nouvelle variable glow */
    box-shadow: 0 0 60px var(--shadow-light), var(--glow-terminal); 
    position: relative; z-index: 20;
    /* Ajout de la rotation 3D lÃ©gÃ¨re */
    transform: rotateX(1deg);
    transition: transform 0.1s ease-out, box-shadow 0.1s ease-out;
}

.window {
    background: var(--bg-deep); 
    border: 3px solid var(--primary-color); 
    border-radius: 0; 
    overflow: hidden;
    display: flex; flex-direction: column;
    height: 100%;
    /* Utilisation de l'animation de glitch subtil */
    animation: glitch-flicker 10s infinite alternate;
}

/* ğŸ’¥ NOUVEAU: BUFFER OVERFLOW VISUEL (Glitch 3D sur le wrapper) */
#main-wrapper.overflow-glitch {
    transform: rotateX(1deg) rotateZ(0.5deg) skewX(-1deg) translateZ(10px) !important;
    animation: buffer-flicker 0.1s infinite alternate; 
    box-shadow: 
        0 0 30px var(--error-color), 
        inset 0 0 20px rgba(255, 0, 0, 0.7) !important; 
}
@keyframes buffer-flicker {
    from { opacity: 1; }
    to { opacity: 0.8; }
}

/* NOUVEAU: Shake (pour les erreurs) */
.shake-screen { 
    animation: shake 0.3s cubic-bezier(.36,.07,.19,.97) both; 
    box-shadow: 
        0 0 20px var(--error-color), 
        inset 0 0 10px rgba(255, 0, 0, 0.5); 
}
@keyframes shake {
  10%, 90% { transform: rotateX(1deg) translate3d(-2px, 0, 0); }
  20%, 80% { transform: rotateX(1deg) translate3d(4px, 0, 0); }
  30%, 50%, 70% { transform: rotateX(1deg) translate3d(-6px, 0, 0); }
  40%, 60% { transform: rotateX(1deg) translate3d(6px, 0, 0); }
}

/* Header et Titre */
.window-header {
    background: #001000; 
    padding: 10px 15px;
    display: flex; justify-content: space-between; align-items: center;
    border-bottom: 2px solid var(--secondary-color);
}
.window-title {
    color: var(--primary-color);
    font-size: 16px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px;
    text-shadow: 0 0 10px var(--shadow-light);
}

/* â•â•â• CORPS DU TERMINAL â•â•â• */
.terminal-body {
    flex: 1; padding: 20px 30px; overflow-y: auto;
    font-size: 14px; 
    /* Utilisation du nouveau glow pour le texte */
    text-shadow: var(--glow-text); 
}

/* Scrollbar (conservÃ©e de votre code) */
.terminal-body::-webkit-scrollbar { width: 8px; }
.terminal-body::-webkit-scrollbar-track { background: #111; }
.terminal-body::-webkit-scrollbar-thumb { background: var(--primary-color); border-radius: 4px; }
.terminal-body::-webkit-scrollbar-thumb:hover { background: var(--secondary-color); }

/* Lignes de sortie (Flicker Text conservÃ©e) */
.output-line {
    margin-bottom: 5px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;
    animation: text-flicker 15s infinite alternate;
}
@keyframes text-flicker {
    0%, 99% { opacity: 1; }
    99.5% { opacity: 0.95; }
    100% { opacity: 1; }
}

/* Styles sÃ©mantiques */
.command { color: #ccffcc; font-weight: 600; }
.error { color: var(--error-color); font-weight: bold; text-shadow: 0 0 5px var(--error-color), 0 0 15px rgba(255, 0, 0, 0.3); } /* AmÃ©liorÃ© */
.success { color: var(--success-color); font-weight: bold; }
.info { color: #33ffcc; } 
.warning { color: #FFFF00; }

/* ASCII Art */
.ascii-art {
    color: var(--primary-color);
    font-size: 24px; /* Agrandit lÃ©gÃ¨rement */
    line-height: 1; font-weight: bold;
    text-shadow: 0 0 20px var(--shadow-light), 0 0 40px rgba(0, 160, 0, 0.3); /* AmÃ©liorÃ© */
    margin: 20px 0;
}

/* â•â•â• INPUT LINE â•â•â• */
.input-line {
    display: flex; align-items: center; gap: 10px;
    padding: 15px 30px; background: var(--bg-deep);
    border-top: 2px solid var(--primary-color);
}
.input-prompt {
    color: var(--primary-color); font-weight: 600; white-space: nowrap;
    font-size: 14px;
}
#terminal-input {
    flex: 1; background: transparent; border: none;
    color: var(--main-text); font-family: 'IBM Plex Mono', monospace;
    font-size: 14px; outline: none;
    caret-color: var(--primary-color);
    text-shadow: var(--glow-text);
}

/* ğŸ’¥ NOUVEAU: Style de l'input en cas de Buffer Overflow */
#terminal-input.overflow-alert {
    color: var(--error-color) !important;
    text-shadow: 0 0 5px var(--error-color) !important;
    animation: input-glitch 0.2s infinite alternate;
}
@keyframes input-glitch {
    from { transform: translateX(0); }
    to { transform: translateX(2px); }
}

/* â•â•â• EFFETS SPÃ‰CIAUX ET ANIMATIONS â•â•â• */
.glow {
    text-shadow: 0 0 10px var(--shadow-light), 0 0 30px rgba(0, 160, 0, 0.4);
    animation: pulseGlow 1.5s infinite alternate;
}
@keyframes pulseGlow {
    from { opacity: 1; }
    to { opacity: 0.8; }
}

/* --- MODAL DE SUCCÃˆS (Faux Faux-Pas) --- */
.modal {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.98); 
    display: flex; justify-content: center; align-items: center; 
    z-index: 100; backdrop-filter: blur(8px);
}
.hidden { display: none !important; }

.modal-content {
    text-align: center; border: 4px solid var(--primary-color); padding: 50px;
    background: var(--bg-deep); 
    box-shadow: 0 0 70px var(--primary-color), inset 0 0 30px var(--secondary-color);
    max-width: 650px; width: 85%;
}
#countdown-display {
    font-size: 4em; font-weight: bold; position: relative;
    color: var(--primary-color);
    text-shadow: 4px 4px 0px #33ffcc, -4px -4px 0px var(--error-color);
    animation: glitch-modal 0.3s infinite linear alternate-reverse; 
}

@keyframes glitch-modal {
    0% { transform: translate(0); }
    15% { transform: translate(-5px, 0); }
    30% { transform: translate(5px, 0); }
    45% { transform: translate(-3px, 3px); clip-path: polygon(0 0, 100% 0, 100% 40%, 0 40%); }
    60% { transform: translate(3px, -3px); clip-path: polygon(0 60%, 100% 60%, 100% 100%, 0 100%); }
    75% { transform: translate(-4px, 4px); }
    100% { transform: translate(0); }
}